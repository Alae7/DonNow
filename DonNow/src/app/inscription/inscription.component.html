<div class="zz">
  <div class="container-fluid p-5">
    <div class="row justify-content-center">
      <div class="col-md-4 text-center p-3">
        <img src="assets/logo-no-background.png" alt="Logo" class="logo">
        <p class="text-muted">
          <strong>Inscrivez-vous maintenant et commencez à soutenir les causes qui vous tiennent à cœur.</strong>
        </p>
      </div>
      <div class="col-md-6 m-md-5">
        <div class="border rounded shadow p-4 form-container">
          <div>
            <h3 class="h3 text-center">
              <span style="color: #FE5630">I</span>nscription
            </h3>
            <hr>
          </div>

          <form (ngSubmit)="onSubmit()" #form="ngForm">
            <!-- Étape 1 : Informations personnelles -->
            <div *ngIf="currentStep === 1">
              <div class="mb-3 row">
                <label for="nom" class="col-sm-3 col-form-label">Nom</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" style="color: #063970" id="nom" [(ngModel)]="formData.nom" name="nom" placeholder="Entrez votre nom" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="prenom" class="col-sm-3 col-form-label">Prénom</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" style="color: #063970" id="prenom" [(ngModel)]="formData.prenom" name="prenom" placeholder="Entrez votre prénom" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="cin" class="col-sm-3 col-form-label">N° CIN</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" style="color: #063970" id="cin" [(ngModel)]="formData.cin" name="cin" placeholder="Entrez votre CIN" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="email" class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">
                  <input type="email" class="form-control" style="color: #063970" id="email" [(ngModel)]="formData.email" name="email" placeholder="Entrez votre email" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="telephone" class="col-sm-3 col-form-label">N° Téléphone</label>
                <div class="col-sm-9">
                  <input type="tel" class="form-control" id="telephone" [(ngModel)]="formData.telephone" name="telephone" style="color: #063970" placeholder="Entrez votre numéro de téléphone" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="password" class="col-sm-3 col-form-label">Mot de passe</label>
                <div class="col-sm-9">
                  <input type="password" class="form-control" id="password" [(ngModel)]="formData.password" name="password" style="color: #063970" placeholder="Entrez votre mot de passe" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="confirmPassword" class="col-sm-3 col-form-label">Confirmation Mot de passe</label>
                <div class="col-sm-9">
                  <input type="password" class="form-control" id="confirmPassword" [(ngModel)]="formData.confirmPassword" name="confirmPassword" style="color: #063970" placeholder="Confirmez votre mot de passe" required>
                </div>
              </div>
              <!-- Message d'erreur -->
              <div *ngIf="passwordError" class="text-danger text-center mb-3">
                Les mots de passe ne sont pas identiques.
              </div>
              <div class="d-grid">
                <button type="button" class="btn p" (click)="nextStep()">Suivant</button>
              </div>
            </div>

            <!-- Étape 2 : Informations supplémentaires -->
            <div *ngIf="currentStep === 2">
              <div class="mb-3 row">
                <label for="dob" class="col-sm-3 col-form-label">Date de naissance</label>
                <div class="col-sm-9">
                  <input type="date" class="form-control" id="dob" [(ngModel)]="formData.dob" name="dob" style="color: #063970" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="profilePicture" class="col-sm-3 col-form-label">Photo de profil</label>
                <div class="col-sm-9">
                  <input type="file" class="form-control" id="profilePicture" [(ngModel)]="formData.file"  name="profilePicture" style="color: #063970"   (change)="onFileSelected($event)" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="address" class="col-sm-3 col-form-label">Adresse complète</label>
                <div class="col-sm-9">
                  <input type="text" style="color: #063970" class="form-control" id="address" [(ngModel)]="formData.address" name="address" placeholder="Entrez votre adresse complète" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="paypal" class="col-sm-3 col-form-label">Adresse Paypal</label>
                <div class="col-sm-9">
                  <input type="text" style="color: #063970" class="form-control" id="paypal" [(ngModel)]="formData.paypal" name="paypal" placeholder="Entrez votre adresse Paypal" required>
                </div>
              </div>
              <div class="mb-3 row">
                <label for="description" class="col-sm-3 col-form-label">Description personnelle</label>
                <div class="col-sm-9">
                  <textarea class="form-control" id="description" rows="3" [(ngModel)]="formData.description" name="description" placeholder="Entrez une description de vous-même" style="color: #063970" required></textarea>
                </div>
              </div>
              <div class="form-check mb-3 row">
                <div class="col-sm-3"></div>
                <div class="col-sm-9">
                  <input class="form-check-input" type="checkbox" id="terms" [(ngModel)]="formData.terms" name="terms" required>
                  <label class="form-check-label" for="terms">
                    J'accepte les conditions d'utilisation, les conditions générales et la politique de confidentialité.
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="d-grid col-md-5">
                  <button type="button" class="btn btn-secondary" (click)="preStep()">Retour</button>
                </div>
                <div class="d-grid col-md-5">
                  <button type="submit" class="btn btn-success"
                          [disabled]="isDisabled">S'inscrire</button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<div *ngIf="isPopupVisible" class="popup-overlay">
  <div class="popup-content">
    <p class="p-2" [ngClass]="{'error-message': isError, 'success-message': !isError}">
      {{ popupMessage }}
    </p>
    <button (click)="closePopup()" class="btn" [ngClass]="isError ? 'btn-danger' : 'btn-success'">
      Close
    </button>
  </div>
</div>
